---
tags: Java, Middle, Runtime
title: Runtime
---
# Runtime

Класс описывает состояние JVM. Можно получить по `Runtime.getRuntime()`.

## Методы
#### `void addShutdownHook(Thread thread)`
```java=
Runtime runtime = Runtime.getRuntime();
runtime.addShutdownHook(new Thread(() -> System.out.println("hello")));

//При завершении виртуальной машины выведется hello
```
К этому методу есть парный метод `removeShutdownHook(Thread thread)`.

1. Хуки могут не запуститься, если JVM падает из-за внутренней ошибки (не из-за всех, только из-за очень критических), если был послан сигнал OS на моментальное закрытие (-9);
2. Может быть много хуков, но порядок их исполнения не гарантируется;
3. Регистрация и удаление возможно только до перехода в состояние выполнения этих хуков;
4. После старта хуков остановить JVM можно только с помощью Runtime.halt().

#### `Process exec(String programName[, ])`
Запускает процесс и возвращает объект описывающий этот процесс.
Существует ProcessBuilder для расширенного управления и настройки процессов.

#### `void exit(int код_завершения)`
Прерывает выполнение программы и возвращает код завершения родительскому процессу. 0 - всё нормально, другой код - ошибка.

#### `long freeMemory()`
Возвращает количество байт свободных JVM

#### `long totalMemory()`
Возвращает количество байт выделенных JVM

#### `void gc()`
Инициирует сборку мусора (не обязательно, что выполнится)

#### `void halt(int code)`
Немедленное прерывание процесса

#### `void load(String name_of_library)`
Динамически загружает библиотеку

#### `void runFinalize()`
Вызывает методы finalize

